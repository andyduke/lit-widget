{"version":3,"file":"index.js","sources":["../src/debounce.js","../src/lit-widget.js","../src/decorators.js"],"sourcesContent":["/**\r\n * Throttle the execution of the function.\r\n *\r\n * You can specify the value in milliseconds as a number or in string format\r\n * with the suffix `'<delay>ms'`, supported suffixes: ms - milliseconds, s - seconds, m - minutes.\r\n *\r\n * This can be handy for \"resize\" or \"scroll\" events.\r\n *\r\n * @param {function} fn - The function to throttle.\r\n * @param {(Number|string)} delay - Delay value.\r\n * @returns {Function} The new throttled function.\r\n */\r\nexport function throttle(fn, delay) {\r\n  let throttlePause;\r\n\r\n  function throttler(...args) {\r\n    if (throttlePause) return;\r\n    throttlePause = true;\r\n\r\n    setTimeout(() => {\r\n      fn.apply(this, args);\r\n      throttlePause = false;\r\n    }, duration(delay));\r\n  }\r\n\r\n  return throttler;\r\n}\r\n\r\n/**\r\n * Debounce the execution of the function.\r\n *\r\n * You can specify the value in milliseconds as a number or in string format\r\n * with the suffix `'<delay>ms'`, supported suffixes: ms - milliseconds, s - seconds, m - minutes.\r\n *\r\n * This can be handy for events such as key presses or \"input\" in input fields.\r\n *\r\n * @param {function} fn - The function to debounce.\r\n * @param {(Number|string)} delay - Delay value.\r\n * @returns {Function} The new debounced function.\r\n */\r\nexport function debounce(fn, delay) {\r\n  let timeoutId;\r\n\r\n  function debouncer(...args) {\r\n    debouncer.clear();\r\n\r\n    timeoutId = setTimeout(() => {\r\n      timeoutId = null;\r\n\r\n      fn.apply(this, args);\r\n    }, duration(delay));\r\n  }\r\n\r\n  debouncer.clear = function() {\r\n    if (timeoutId) {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = null;\r\n    }\r\n  }\r\n\r\n  return debouncer;\r\n}\r\n\r\n/**\r\n * Duration converter from human-readable form to milliseconds.\r\n *\r\n * Converts a string like `'<delay>ms'` to milliseconds.\r\n * Supported suffixes: ms - milliseconds, s - seconds, m - minutes.\r\n *\r\n * If a numeric value is passed, it is returned unchanged.\r\n *\r\n * @param {(string|Number)} value - Duration in human-readable form.\r\n * @returns {Number} - Value in milliseconds.\r\n */\r\nexport function duration(value) {\r\n  if (typeof value === 'number') {\r\n    return value;\r\n  }\r\n  if (typeof value !== 'string') {\r\n    throw new Error(`Invalid duration \"${value}\".`);\r\n  }\r\n\r\n  const duration = parseFloat(value);\r\n  if (isNaN(duration)) {\r\n    throw new Error(`Invalid duration value \"${value}\".`);\r\n  }\r\n\r\n  if (value.endsWith('ms')) {\r\n    return duration;\r\n  }\r\n  if (value.endsWith('s')) {\r\n    return duration * 1000;\r\n  }\r\n  if (value.endsWith('m')) {\r\n    return duration * 1000 * 60;\r\n  }\r\n}\r\n","import { LitElement, html } from 'lit';\r\nimport { templateContent } from 'lit/directives/template-content.js';\r\nimport { throttle, debounce } from './debounce';\r\n\r\n/**\r\n * Declarative binding to child elements for [LitElement](https://lit.dev/)\r\n * like [Github/Catalyst](https://catalyst.rocks/) and\r\n * [Stimulus.js](https://stimulus.hotwired.dev/).\r\n *\r\n * To define a widget, subclass LitWidget, specify targets using\r\n * the `@target/@targets` decorators or the `static targets/targetsAll` property,\r\n * and add event handlers using the `@onEvent` decorator or\r\n * the `static events` property.\r\n *\r\n * LitWidget unlike LitElement implements the **`render()`** method,\r\n * which renders all child elements of the widget through `<slot>`.\r\n * To change this behavior, simply override the `render` method and\r\n * implement your own rendering.\r\n *\r\n * LitWidget makes all page styles (both `<style>` and `<link>` tags) available\r\n * in **shadowRoot** by default (except styles with the `[data-shared=\"false\"]` attribute),\r\n * this behavior can be disabled by setting the `sharedStyles` static property to `false`.\r\n */\r\nexport class LitWidget extends LitElement {\r\n\r\n  static widget(name) {\r\n    return function(proto, options) {\r\n      LitWidget.define(name, proto, options);\r\n    }\r\n  }\r\n\r\n  static define(name, constructor, options) {\r\n    customElements.define('w-' + name, constructor, options);\r\n  }\r\n\r\n  render() {\r\n    return html`<slot></slot>`;\r\n  }\r\n\r\n  /**\r\n   * Specifies whether to import page styles into shadowRoot.\r\n   */\r\n  static sharedStyles = true\r\n\r\n  createRenderRoot() {\r\n    // Find handle [data-root]\r\n    let shadowRoot = true;\r\n    let root;\r\n    const tagName = this.tagName.toLowerCase();\r\n    const rootElement = this.querySelector(`[data-root=\"${tagName}\"]`);\r\n    if (!!rootElement && rootElement.closest(tagName) == this) {\r\n      root = rootElement;\r\n      shadowRoot = false;\r\n    } else {\r\n      root = super.createRenderRoot();\r\n    }\r\n\r\n    const sharedStyles = Object.getPrototypeOf(this).constructor.sharedStyles;\r\n\r\n    if (shadowRoot && sharedStyles) {\r\n      // Import styles\r\n      for (const style of document.head.querySelectorAll('style')) {\r\n        if (style.getAttribute('data-shared') == 'false') continue;\r\n        const styleClone = style.cloneNode(true);\r\n        root.insertBefore(styleClone, root.firstChild);\r\n      }\r\n\r\n      // Import link[stylesheet]\r\n      for (const style of document.head.querySelectorAll('link[rel=\"stylesheet\"]')) {\r\n        if (style.getAttribute('data-shared') == 'false') continue;\r\n        const styleClone = style.cloneNode(true);\r\n        root.insertBefore(styleClone, root.firstChild);\r\n      }\r\n    }\r\n\r\n    return root;\r\n  }\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n\r\n    setTimeout(() => this._attachEvents());\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    super.disconnectedCallback();\r\n\r\n    setTimeout(() => this._detachEvents());\r\n  }\r\n\r\n  get _events() {\r\n    const klass = Object.getPrototypeOf(this).constructor;\r\n    return klass.events || [];\r\n  }\r\n\r\n  _attachEvents() {\r\n    for (const event of this._events) {\r\n      if (event.debounce && event.throttle) {\r\n        throw new Error(`[LitWidget \"${$this.tagName.toLowerCase()}\"] For the event \"${event.event}\", debounce and throttle are specified, you can specify only one thing.`);\r\n      }\r\n\r\n      const target = this.findTarget(this.tagName, event.target);\r\n      if (target) {\r\n        let handler = event.handler;\r\n        if (typeof handler === 'string') handler = this[handler];\r\n\r\n        event._handler = (...args) => handler.apply(this, args);\r\n\r\n        if (event.debounce) {\r\n          event._handler = debounce(event._handler, event.debounce);\r\n        } else if (event.throttle) {\r\n          event._handler = throttle(event._handler, event.throttle);\r\n        }\r\n\r\n        if (event['wrapper'] != null && typeof event['wrapper'] !== 'undefined') {\r\n          event._handler = event.wrapper.call(this, event._handler, this);\r\n        }\r\n\r\n        target.addEventListener(event.event, event._handler);\r\n      } else {\r\n        throw new Error(`[LitWidget \"${this.tagName.toLowerCase()}\"] Event target \"${event.target}\" not found.`);\r\n      }\r\n    }\r\n  }\r\n\r\n  _detachEvents() {\r\n    for (const event of this._events) {\r\n      if (!!event._handler) {\r\n        target.addEventListener(event.event, event._handler);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * findTarget will run `querySelectorAll` against the given widget element, plus\r\n   * its shadowRoot, returning any the first child that:\r\n   *\r\n   *  - Matches the selector of `[data-target~=\"tag.name\"]` where tag is the\r\n   *    tagName of the HTMLElement, and `name` is the given `targetName` argument.\r\n   *\r\n   *  - Closest ascendant of the element, that matches the tagname of the\r\n   *    widget, is the specific instance of the widget itself - in other\r\n   *    words it is not nested in other widgets of the same type.\r\n   *\r\n   * @param {string} tagName - HTML element tag name\r\n   * @param {string} targetName - Widget property name\r\n   * @param {string} [selector] - Selector to find element instead of using [data-target]\r\n   * @param {Function} [converter] - The result converter can be used to convert the tag, for example using templateContent\r\n   * @returns {(HTMLElement|any|null)} The HTML element found, or null if no matching element was found\r\n   */\r\n  findTarget(tagName, targetName, selector = null, converter = null) {\r\n    let convert = (value) => !!converter ? converter(value) : value;\r\n    const tag = tagName.toLowerCase();\r\n\r\n    if (!!selector) {\r\n      for (const el of this.querySelectorAll(selector)) {\r\n        if (el.closest(tag) === this) {\r\n          return convert(el);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.shadowRoot) {\r\n      for (const el of this.shadowRoot.querySelectorAll(`[data-target~=\"${tag}.${targetName}\"]`)) {\r\n        if (!el.closest(tag)) return convert(el);\r\n      }\r\n    }\r\n\r\n    for (const el of this.querySelectorAll(`[data-target~=\"${tag}.${targetName}\"]`)) {\r\n      if (el.closest(tag) === this) return convert(el);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * findTargets will run `querySelectorAll` against the given widget element, plus\r\n   * its shadowRoot, returning all matching child elements that are:\r\n   *\r\n   *  - Matches the selector of `[data-targets~=\"tag.name\"]` where tag is the\r\n   *    tagName of the HTMLElement, and `name` is the given `targetName` argument.\r\n   *\r\n   *  - Closest ascendant of the element, that matches the tagname of the\r\n   *    widget, is the specific instance of the widget itself - in other\r\n   *    words it is not nested in other widgets of the same type.\r\n   *\r\n   * @param {string} tagName - HTML element tag name\r\n   * @param {string} targetName - Widget property name\r\n   * @param {string} [selector] - Selector to find elements instead of using [data-targets]\r\n   * @param {Function} [converter] - The result converter can be used to convert the result tags, for example using templateContent\r\n   * @returns {HTMLElement[]} The HTML elements found\r\n   */\r\n  findTargets(tagName, targetName, selector = null, converter = null) {\r\n    let convert = (value) => !!converter ? converter(value) : value;\r\n    const tag = tagName.toLowerCase();\r\n    const targets = [];\r\n\r\n    if (!!selector) {\r\n      for (const el of this.querySelectorAll(selector)) {\r\n        if (el.closest(tag) === this) {\r\n          targets.push(convert(el));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.shadowRoot) {\r\n      for (const el of this.shadowRoot.querySelectorAll(`[data-targets~=\"${tag}.${targetName}\"]`)) {\r\n        if (!el.closest(tag)) {\r\n          targets.push(convert(el));\r\n        }\r\n      }\r\n    }\r\n\r\n    for (const el of this.querySelectorAll(`[data-targets~=\"${tag}.${targetName}\"]`)) {\r\n      if (el.closest(tag) === this) {\r\n        targets.push(convert(el));\r\n      }\r\n    }\r\n\r\n    return targets;\r\n  }\r\n\r\n}\r\n\r\nLitWidget.addInitializer((instance) => {\r\n  const klass = Object.getPrototypeOf(instance).constructor;\r\n\r\n  if (typeof klass.targets !== 'undefined') {\r\n    for (const [target, options] of Object.entries(klass.targets)) {\r\n      // Add target getter\r\n      Object.defineProperty(instance, target, {\r\n        configurable: true,\r\n        get() {\r\n          if (typeof this._findCache === 'undefined') {\r\n            this._findCache = {};\r\n          }\r\n\r\n          if (this._findCache[target]) {\r\n            return this._findCache[target];\r\n          } else {\r\n            let targetElement = this._findCache[target] ??= this.findTarget(this.tagName, target, options.selector);\r\n            if (targetElement == null) {\r\n              console.error(`[LitWidget \"${klass.name}\"] Target \"${target}\" not found.`);\r\n            } else {\r\n              const convertTemplate = (options.template === true) || ((targetElement.tagName.toLowerCase() == 'template') && (options.template !== false));\r\n              if (convertTemplate) {\r\n                targetElement = templateContent(targetElement);\r\n              }\r\n              this._findCache[target] = targetElement;\r\n            }\r\n            return targetElement;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  if (typeof klass.targetsAll !== 'undefined') {\r\n    for (const [target, options] of Object.entries(klass.targetsAll)) {\r\n      // Add target getter\r\n      Object.defineProperty(instance, target, {\r\n        configurable: true,\r\n        get() {\r\n          if (typeof this._findCache === 'undefined') {\r\n            this._findCache = {};\r\n          }\r\n          return this._findCache[target] ??= this.findTargets(this.tagName, target, options.selector);\r\n        }\r\n      });\r\n    }\r\n  }\r\n});\r\n","import { LitWidget } from './lit-widget';\r\n\r\n/**\r\n * Decorator to bind a property to a child HTML element\r\n *\r\n * By default, it binds to a child element with the `data-target` attribute equal to\r\n * the component's tag name and the name of the property connected by a dot,\r\n * like this - `tag-name.property-name`.\r\n *\r\n * The element is first looked up in renderRoot and then in the component tag itself.\r\n *\r\n * If a CSS selector is specified, the element with the matching selector\r\n * is searched for only among the child elements of the component tag.\r\n *\r\n * If the element being bound is the `<template>` tag, then by default\r\n * automatic conversion takes place using the Lit's directive `templateContent`.\r\n * To disable this behavior - you must specify `template: false`.\r\n *\r\n * @param {{selector: string, template: Boolean}} options - Optional parameters for binding.\r\n * @param {string} options.selector - CSS selector to find the element to which the property will be bound.\r\n * @param {Boolean} options.template - Controls how the `<template>` tag is converted when bound.\r\n */\r\nexport function target({ selector } = {}, name = null) {\r\n  const wrapper = function(instance, property) {\r\n    const klass = instance.constructor;\r\n    if (!(instance instanceof LitWidget)) {\r\n      throw new Error(`[LitWidget] The class \"${klass.name}\" is not a descendant of LitWidget.`);\r\n    }\r\n\r\n    if (typeof klass.targets === 'undefined') {\r\n      klass.targets = {};\r\n    }\r\n    klass.targets[property] = {selector};\r\n  };\r\n\r\n  if (name == null) {\r\n    return wrapper;\r\n  } else {\r\n    const instance = arguments[0];\r\n    wrapper(instance, name);\r\n  }\r\n}\r\n\r\n/**\r\n * Decorator to bind a property to an array of HTML child elements\r\n *\r\n * By default, it binds to an array of child elements with a `data-targets`\r\n * attribute equal to the component's tag name and the name of the property\r\n * connected by a dot, like this - `tag-name.property-name`.\r\n *\r\n * Elements are looked up in renderRoot and in the component tag itself.\r\n *\r\n * If a CSS selector is specified, all elements with the matching selector\r\n * are searched only among the child elements of the component tag.\r\n *\r\n * @param {{selector: string}} options - Optional parameters for binding.\r\n * @param {string} options.selector - CSS selector to find the elements to which the property will be bound.\r\n */\r\nexport function targets({ selector } = {}, name = null) {\r\n  const wrapper = function(instance, property) {\r\n    const klass = instance.constructor;\r\n    if (!(instance instanceof LitWidget)) {\r\n      throw new Error(`[LitWidget] The class \"${klass.name}\" is not a descendant of LitWidget.`);\r\n    }\r\n\r\n    if (typeof klass.targetsAll === 'undefined') {\r\n      klass.targetsAll = {};\r\n    }\r\n    klass.targetsAll[property] = {selector};\r\n  };\r\n\r\n  if (name == null) {\r\n    return wrapper;\r\n  } else {\r\n    const instance = arguments[0];\r\n    wrapper(instance, name);\r\n  }\r\n}\r\n\r\n/**\r\n * Decorator to attach a method as an HTML child element event handler\r\n *\r\n * @param {string} target - The name of the target to find the HTML element.\r\n * @param {string} event - The name of the DOM event to which the handler is attached.\r\n * @param {{debounce: (Number|string), throttle: (Number|string), wrapper: function(function, this)}} options - Optional parameters for attaching an event.\r\n * @param options.debounce - Delay to debounce the execution of the event handler,\r\n *     you can specify the value in milliseconds as a number or in string format\r\n *     with the suffix `'<delay>ms'`, supported suffixes: ms - milliseconds, s - seconds, m - minutes.\r\n *     This can be handy for events such as key presses or \"input\" in input fields.\r\n * @param options.throttle - Delay to throttle the execution of the event handler,\r\n *     you can specify the value in milliseconds as a number or in string format\r\n *     with the suffix `'<delay>ms'`, supported suffixes: ms - milliseconds, s - seconds, m - minutes.\r\n *     This can be handy for \"resize\" or \"scroll\" events.\r\n * @param options.wrapper - Wrapper function to apply additional decorators to the event handler;\r\n *     can be useful for example to apply a debounce decorator with a delay set at runtime:\r\n *     `onEvent(..., wrapper: (fn, self) => debounce(fn, self.delay) )`.\r\n *     The first parameter in the wrapper is the event handler method,\r\n *     the second is a reference to the class instance.\r\n */\r\nexport function onEvent(target, event, { debounce, throttle, wrapper } = {}) {\r\n  return function(instance, property) {\r\n    const klass = instance.constructor;\r\n    if (!(instance instanceof LitWidget)) {\r\n      throw new Error(`[LitWidget] The class \"${klass.name}\" is not a descendant of LitWidget.`);\r\n    }\r\n\r\n    if (typeof klass.events === 'undefined') {\r\n      klass.events = [];\r\n    }\r\n\r\n    klass.events.push({\r\n      target: target,\r\n      handler: instance[property],\r\n      event: event,\r\n      debounce: debounce || null,\r\n      throttle: throttle || null,\r\n      wrapper: wrapper || null,\r\n    });\r\n  };\r\n}\r\n"],"names":["throttle","fn","delay","throttlePause","args","setTimeout","apply","duration","debounce","timeoutId","debouncer","clear","clearTimeout","value","Error","parseFloat","isNaN","endsWith","LitWidget","render","html","createRenderRoot","shadowRoot","tagName","toLowerCase","rootElement","querySelector","closest","root","sharedStyles","Object","getPrototypeOf","constructor","document","head","querySelectorAll","style","getAttribute","styleClone","cloneNode","insertBefore","firstChild","connectedCallback","_attachEvents","disconnectedCallback","_detachEvents","_events","event","$this","target","findTarget","handler","_handler","wrapper","call","addEventListener","targetName","selector","converter","convert","tag","el","findTargets","targets","push","widget","name","proto","options","define","customElements","klass","events","LitElement","addInitializer","instance","entries","defineProperty","configurable","get","_findCache","targetElement","console","error","template","templateContent","targetsAll","property","arguments","onEvent"],"mappings":"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"}