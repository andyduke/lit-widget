{"version":3,"file":"index.js","sources":["../src/debounce.js","../src/lit-widget.js","../src/decorators.js"],"sourcesContent":["\r\nexport function throttle(fn, duration) {\r\n  let throttlePause;\r\n\r\n  function throttler(...args) {\r\n    if (throttlePause) return;\r\n    throttlePause = true;\r\n\r\n    setTimeout(() => {\r\n      fn.apply(this, args);\r\n      throttlePause = false;\r\n    }, duration);\r\n  }\r\n\r\n  return throttler;\r\n}\r\n\r\nexport function debounce(fn, duration) {\r\n  let timeoutId;\r\n\r\n  function debouncer(...args) {\r\n    debouncer.clear();\r\n\r\n    timeoutId = setTimeout(() => {\r\n      timeoutId = null;\r\n\r\n      fn.apply(this, args);\r\n    }, duration);\r\n  }\r\n\r\n  debouncer.clear = function() {\r\n    if (timeoutId) {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = null;\r\n    }\r\n  }\r\n\r\n  return debouncer;\r\n}\r\n\r\nexport function duration(value) {\r\n  if (typeof value === 'number') {\r\n    return value;\r\n  }\r\n  if (typeof value !== 'string') {\r\n    throw new Error(`Invalid duration \"${value}\".`);\r\n  }\r\n\r\n  const duration = parseFloat(value);\r\n  if (isNaN(duration)) {\r\n    throw new Error(`Invalid duration value \"${value}\".`);\r\n  }\r\n\r\n  if (value.endsWith('ms')) {\r\n    return duration;\r\n  }\r\n  if (value.endsWith('s')) {\r\n    return duration * 1000;\r\n  }\r\n  if (value.endsWith('m')) {\r\n    return duration * 1000 * 60;\r\n  }\r\n}\r\n","import { LitElement, html } from 'lit';\r\nimport { templateContent } from 'lit/directives/template-content.js';\r\nimport { throttle, debounce, duration } from './debounce';\r\n\r\nexport class LitWidget extends LitElement {\r\n\r\n  static widget(name) {\r\n    return function(proto, options) {\r\n      LitWidget.define(name, proto, options);\r\n    }\r\n  }\r\n\r\n  static define(name, constructor, options) {\r\n    customElements.define('w-' + name, constructor, options);\r\n  }\r\n\r\n  render() {\r\n    return html`<slot></slot>`;\r\n  }\r\n\r\n  static sharedStyles = true\r\n\r\n  createRenderRoot() {\r\n    // Find handle [data-root]\r\n    let shadowRoot = true;\r\n    let root;\r\n    const tagName = this.tagName.toLowerCase();\r\n    const rootElement = this.querySelector(`[data-root=\"${tagName}\"]`);\r\n    if (!!rootElement && rootElement.closest(tagName) == this) {\r\n      root = rootElement;\r\n      shadowRoot = false;\r\n    } else {\r\n      root = super.createRenderRoot();\r\n    }\r\n\r\n    const sharedStyles = Object.getPrototypeOf(this).constructor.sharedStyles;\r\n\r\n    if (shadowRoot && sharedStyles) {\r\n      // Import styles\r\n      for (const style of document.head.querySelectorAll('style')) {\r\n        if (style.getAttribute('data-shared') == 'false') continue;\r\n        const styleClone = style.cloneNode(true);\r\n        root.insertBefore(styleClone, root.firstChild);\r\n      }\r\n\r\n      // Import link[stylesheet]\r\n      for (const style of document.head.querySelectorAll('link[rel=\"stylesheet\"]')) {\r\n        if (style.getAttribute('data-shared') == 'false') continue;\r\n        const styleClone = style.cloneNode(true);\r\n        root.insertBefore(styleClone, root.firstChild);\r\n      }\r\n    }\r\n\r\n    return root;\r\n  }\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n\r\n    setTimeout(() => this._attachEvents());\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    super.disconnectedCallback();\r\n\r\n    setTimeout(() => this._detachEvents());\r\n  }\r\n\r\n  get _events() {\r\n    const klass = Object.getPrototypeOf(this).constructor;\r\n    return klass.events || [];\r\n  }\r\n\r\n  _attachEvents() {\r\n    for (const event of this._events) {\r\n      if (event.debounce && event.throttle) {\r\n        throw new Error(`[LitWidget \"${$this.tagName.toLowerCase()}\"] For the event \"${event.event}\", debounce and throttle are specified, you can specify only one thing.`);\r\n      }\r\n\r\n      const target = this.findTarget(this.tagName, event.target);\r\n      if (target) {\r\n        let handler = event.handler;\r\n        if (typeof handler === 'string') handler = this[handler];\r\n\r\n        event._handler = (...args) => handler.apply(this, args);\r\n\r\n        if (event.debounce) {\r\n          event._handler = debounce(event._handler, duration(event.debounce));\r\n        } else if (event.throttle) {\r\n          event._handler = throttle(event._handler, duration(event.throttle));\r\n        }\r\n\r\n        if (event['wrapper'] != null && typeof event['wrapper'] !== 'undefined') {\r\n          event._handler = event.wrapper.call(this, event._handler, this);\r\n        }\r\n\r\n        target.addEventListener(event.event, event._handler);\r\n      } else {\r\n        throw new Error(`[LitWidget \"${this.tagName.toLowerCase()}\"] Event target \"${event.target}\" not found.`);\r\n      }\r\n    }\r\n  }\r\n\r\n  _detachEvents() {\r\n    for (const event of this._events) {\r\n      if (!!event._handler) {\r\n        target.addEventListener(event.event, event._handler);\r\n      }\r\n    }\r\n  }\r\n\r\n  findTarget(tagName, targetName, selector = null, converter = null) {\r\n    let convert = (value) => !!converter ? converter(value) : value;\r\n    const tag = tagName.toLowerCase();\r\n\r\n    if (!!selector) {\r\n      for (const el of this.querySelectorAll(selector)) {\r\n        if (el.closest(tag) === this) {\r\n          return convert(el);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.renderRoot) {\r\n      for (const el of this.renderRoot.querySelectorAll(`[data-target~=\"${tag}.${targetName}\"]`)) {\r\n        if (!el.closest(tag)) return convert(el);\r\n      }\r\n    }\r\n\r\n    for (const el of this.querySelectorAll(`[data-target~=\"${tag}.${targetName}\"]`)) {\r\n      if (el.closest(tag) === this) return convert(el);\r\n    }\r\n  }\r\n\r\n  findTargets(tagName, targetName, selector = null, converter = null) {\r\n    let convert = (value) => !!converter ? converter(value) : value;\r\n    const tag = tagName.toLowerCase();\r\n    const targets = [];\r\n\r\n    if (!!selector) {\r\n      for (const el of this.querySelectorAll(selector)) {\r\n        if (el.closest(tag) === this) {\r\n          targets.push(convert(el));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.renderRoot) {\r\n      for (const el of this.renderRoot.querySelectorAll(`[data-targets~=\"${tag}.${targetName}\"]`)) {\r\n        if (!el.closest(tag)) {\r\n          targets.push(convert(el));\r\n        }\r\n      }\r\n    }\r\n\r\n    for (const el of this.querySelectorAll(`[data-targets~=\"${tag}.${targetName}\"]`)) {\r\n      if (el.closest(tag) === this) {\r\n        targets.push(convert(el));\r\n      }\r\n    }\r\n\r\n    return targets;\r\n  }\r\n\r\n}\r\n\r\nLitWidget.addInitializer((instance) => {\r\n  const klass = Object.getPrototypeOf(instance).constructor;\r\n\r\n  if (typeof klass.targets !== 'undefined') {\r\n    for (const [target, options] of Object.entries(klass.targets)) {\r\n      // Add target getter\r\n      Object.defineProperty(instance, target, {\r\n        configurable: true,\r\n        get() {\r\n          if (typeof this._findCache === 'undefined') {\r\n            this._findCache = {};\r\n          }\r\n\r\n          if (this._findCache[target]) {\r\n            return this._findCache[target];\r\n          } else {\r\n            const targetElement = this._findCache[target] ??= this.findTarget(this.tagName, target, options.selector, options.template ? (value) => templateContent(value) : null);\r\n            if (targetElement == null) {\r\n              console.error(`[LitWidget \"${klass.name}\"] Target \"${target}\" not found.`);\r\n            } else {\r\n              this._findCache[target] = targetElement;\r\n            }\r\n            return targetElement;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  if (typeof klass.targetsAll !== 'undefined') {\r\n    for (const [target, options] of Object.entries(klass.targetsAll)) {\r\n      // Add target getter\r\n      Object.defineProperty(instance, target, {\r\n        configurable: true,\r\n        get() {\r\n          if (typeof this._findCache === 'undefined') {\r\n            this._findCache = {};\r\n          }\r\n          return this._findCache[target] ??= this.findTargets(this.tagName, target, options.selector, options.template ? (value) => templateContent(value) : null);\r\n        }\r\n      });\r\n    }\r\n  }\r\n});\r\n","\r\nimport { LitWidget } from './lit-widget';\r\n\r\nexport function target({ selector } = {}, name = null) {\r\n  const wrapper = function(instance, property) {\r\n    const klass = instance.constructor;\r\n    if (!(instance instanceof LitWidget)) {\r\n      throw new Error(`[LitWidget] The class \"${klass.name}\" is not a descendant of LitWidget.`);\r\n    }\r\n\r\n    if (typeof klass.targets === 'undefined') {\r\n      klass.targets = {};\r\n    }\r\n    klass.targets[property] = {selector};\r\n  };\r\n\r\n  if (name == null) {\r\n    return wrapper;\r\n  } else {\r\n    const instance = arguments[0];\r\n    wrapper(instance, name);\r\n  }\r\n}\r\n\r\nexport function targets({ selector } = {}, name = null) {\r\n  const wrapper = function(instance, property) {\r\n    const klass = instance.constructor;\r\n    if (!(instance instanceof LitWidget)) {\r\n      throw new Error(`[LitWidget] The class \"${klass.name}\" is not a descendant of LitWidget.`);\r\n    }\r\n\r\n    if (typeof klass.targetsAll === 'undefined') {\r\n      klass.targetsAll = {};\r\n    }\r\n    klass.targetsAll[property] = {selector};\r\n  };\r\n\r\n  if (name == null) {\r\n    return wrapper;\r\n  } else {\r\n    const instance = arguments[0];\r\n    wrapper(instance, name);\r\n  }\r\n}\r\n\r\nexport function onEvent(target, event, { debounce, throttle, wrapper } = {}) {\r\n  return function(instance, property) {\r\n    const klass = instance.constructor;\r\n    if (!(instance instanceof LitWidget)) {\r\n      throw new Error(`[LitWidget] The class \"${klass.name}\" is not a descendant of LitWidget.`);\r\n    }\r\n\r\n    if (typeof klass.events === 'undefined') {\r\n      klass.events = [];\r\n    }\r\n\r\n    klass.events.push({\r\n      target: target,\r\n      handler: instance[property],\r\n      event: event,\r\n      debounce: debounce || null,\r\n      throttle: throttle || null,\r\n      wrapper: wrapper || null,\r\n    });\r\n  };\r\n}\r\n"],"names":["throttle","fn","duration","throttlePause","args","setTimeout","apply","debounce","timeoutId","debouncer","clear","clearTimeout","value","Error","parseFloat","isNaN","endsWith","LitWidget","render","html","createRenderRoot","shadowRoot","tagName","toLowerCase","rootElement","querySelector","closest","root","sharedStyles","Object","getPrototypeOf","constructor","document","head","querySelectorAll","style","getAttribute","styleClone","cloneNode","insertBefore","firstChild","connectedCallback","_attachEvents","disconnectedCallback","_detachEvents","_events","event","$this","target","findTarget","handler","_handler","wrapper","call","addEventListener","targetName","selector","converter","convert","tag","el","renderRoot","findTargets","targets","push","widget","name","proto","options","define","customElements","klass","events","LitElement","addInitializer","instance","entries","defineProperty","configurable","get","_findCache","targetElement","template","templateContent","console","error","targetsAll","property","arguments","onEvent"],"mappings":"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"}